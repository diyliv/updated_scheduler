1. [В чем суть планировщика Go?](#в-чем-суть-планировщика-go)
2. [Горутины](#горутины)

# В чем суть планировщика Go?
`Планировшик Go` - это механизм рантайма, который отвечает за эффективное распределение и управление горутинами.
Основная идея планировщика заключается в модели `M:N`, где `M` - обозначает количество горутин, а `N` - количество потоков операционной системы. Для начала разберемся с горутинами.

# Горутины
В отличие от тредов операционной системы, `горутины` являются легковесными тредами, которые управляются рантаймом `Go` в пользовательском пространстве. За счет этого, потребляется меньше памяти и переключение контекста происходит в разы быстрее. 
Я думаю, каждый слышал, что программа на `Go` может обрабатывать сотни, тысячи  конкурентных задач без огромного потребления памяти из этого вытекает сопутствующий вопрос, а как это реализовано? 
## Динамическая аллокация стека
1) Традиционные треды: В Си/Яве, каждый тред ОС имеет стек фиксированного размера, обычно это 1-2 `MiB`. То есть, если запустить 1000 тредов, то на это потребуется 1-2 `GiB` памяти. Даже если большая часть тредов использует не весь стек, то все равно будет выделено именно то количество памяти, которое требует тред. Следовательно, мы просто так теряем память.
2) Горутины: Горутины же в свою очередь начинают работу со стеком маленького размера - 2 `KiB`. Рантайм `Go` может динамически изменять размер стека по мере необходимости.
* Увеличение стека: Если стеку необходимо больше места (для глубокой рекурсии или же много локальных переменных), то рантайм аллоцирует 